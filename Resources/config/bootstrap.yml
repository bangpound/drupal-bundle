parameters:
    bangpound_drupal.bootstrap.class:                         Bangpound\Bundle\DrupalBundle\Bootstrap

#   This provides the original callbacks for each bootstrap phase.
    bangpound_drupal.bootstrap.listener.default_phases.class: Bangpound\Bridge\Drupal\EventListener\DefaultPhasesListener

#   Listeners remove or override the original behavior of the bootstrap phase.
    bangpound_drupal.bootstrap.listener.configuration.class:  Bangpound\Bridge\Drupal\EventListener\ConfigurationListener
    bangpound_drupal.bootstrap.listener.page_cache.class:     Bangpound\Bridge\Drupal\EventListener\PageCacheListener
    bangpound_drupal.bootstrap.listener.database.class:       Bangpound\Bridge\Drupal\EventListener\DatabaseListener
    bangpound_drupal.bootstrap.listener.page_header.class:    Bangpound\Bridge\Drupal\EventListener\PageHeaderListener
    bangpound_drupal.bootstrap.listener.full.class:           Bangpound\Bridge\Drupal\EventListener\FullListener

#   Repace the Drupal 7 registry with Symfony autoloading.
    bangpound_drupal.bootstrap.listener.autoload.class:       Bangpound\Bridge\Drupal\EventListener\AutoloadListener

#   Register Symfony parameters as Drupal 7 configuration variables.
    bangpound_drupal.bootstrap.listener.variables.class:      Bangpound\Bridge\Drupal\EventListener\VariablesListener

#   Bootstrap listener coordinates Drupal bootstrap during the kernel.request event.
    bangpound_drupal.bootstrap.listener.kernel.class:         Bangpound\Bundle\DrupalBundle\EventListener\Bootstrap\KernelListener
    bangpound_drupal.bootstrap.phases.class:                  Drupal\Core\BootstrapPhases

    bangpound_drupal.bootstrap.listener.command.class:        Bangpound\Bundle\DrupalBundle\EventListener\CommandListener

services:
    bangpound_drupal.bootstrap:
        class: %bangpound_drupal.bootstrap.class%
        calls:
            - [ setUri, [ %bangpound_drupal.url% ] ]
            - [ setRoot, [ %kernel.root_dir%/../web ] ]
            - [ setEventDispatcher, [ @event_dispatcher ] ]
            - [ boot ]

    bangpound_drupal.bootstrap.phases:
        class: %bangpound_drupal.bootstrap.phases.class%

    bangpound_drupal.bootstrap.listener.default_phases:
        class: %bangpound_drupal.bootstrap.listener.default_phases.class%
        arguments: [ @bangpound_drupal.bootstrap.phases ]
        tags:
            - { name: kernel.event_subscriber }

    bangpound_drupal.bootstrap.listener.kernel:
        class: %bangpound_drupal.bootstrap.listener.kernel.class%
        arguments: [ %kernel.root_dir%/../web, @bangpound_drupal.drufony ]
        tags:
            - { name: kernel.event_subscriber }

    bangpound_drupal.bootstrap.listener.configuration:
        class: %bangpound_drupal.bootstrap.listener.configuration.class%
        tags:
            - { name: kernel.event_listener, event: drupal_bootstrap.get.configuration, method: onBootstrapConfiguration, priority: 8 }
            - { name: kernel.event_listener, event: drupal_bootstrap.filter.configuration, method: startTimer, priority: -3 }
            - { name: kernel.event_listener, event: drupal_bootstrap.filter.configuration, method: initializeSettings, priority: -4 }

    bangpound_drupal.bootstrap.listener.page_cache:
        class: %bangpound_drupal.bootstrap.listener.page_cache.class%
        tags:
            - { name: kernel.event_listener, event: drupal_bootstrap.get.page_cache, method: onBootstrapPageCache, priority: 8 }

    bangpound_drupal.bootstrap.listener.database:
        class: %bangpound_drupal.bootstrap.listener.database.class%
        tags:
            - { name: kernel.event_listener, event: drupal_bootstrap.get.database, method: onBootstrapDatabase, priority: 8 }

    bangpound_drupal.bootstrap.listener.page_header:
        class: %bangpound_drupal.bootstrap.listener.page_header.class%
        tags:
            - { name: kernel.event_listener, event: drupal_bootstrap.get.page_header, method: onBootstrapPageHeader, priority: 8 }

    bangpound_drupal.bootstrap.listener.full:
        class: %bangpound_drupal.bootstrap.listener.full.class%
        tags:
            - { name: kernel.event_listener, event: drupal_bootstrap.get.full, method: onBootstrapFull, priority: 8 }
            - { name: kernel.event_listener, event: kernel.request, method: initializeTheme, priority: -1 }
            - { name: kernel.event_listener, event: kernel.request, method: hookInit, priority: -1 }

    bangpound_drupal.bootstrap.listener.autoload:
        class: %bangpound_drupal.bootstrap.listener.autoload.class%
        tags:
            - { name: kernel.event_subscriber }

    bangpound_drupal.bootstrap.listener.variables:
        class: %bangpound_drupal.bootstrap.listener.variables.class%
        arguments: [ %bangpound_drupal.conf% ]
        tags:
            - { name: kernel.event_subscriber }
